# **プロダクト設計書: MinnaBooster**

## **1\. プロダクト概要**

**プロダクト名**: MinnaBooster (みんなブースター)

イベント会場などで参加者が一体となって楽しめる、リアルタイム参加型メーターアプリケーション。  
メインスクリーンに表示されるメーターに対し、参加者は手元のスマートフォンからボタンを連打することでカウントを増やしていく。目標カウントに到達すると、お祝いの演出が表示されるシンプルなWebアプリケーション。

## **2\. ユーザーフロー**

1. **案内**: 参加者は、メインスクリーン（プロジェクター等）に表示された案内ページ (/) を見る。  
2. **参加**: スマートフォンで画面上のQRコードを読み取り、ボタンページ (/button) にアクセスする。  
3. **インタラクション**: 参加者はボタンを連打する。押された回数はリアルタイムでメーターページ (/meter) に集計・反映される。  
4. **ゴール**: 全員の合計カウントが目標値である**50**を超えると、メーターページでお祝いのアニメーションが表示される。  
5. **リセット**: イベント主催者などがメーターページのリセットボタンを押すと、カウントが0に戻り、再度プレイ可能になる。

## **3\. 画面仕様**

### **3.1. 案内ページ (/)**

* **目的**: 参加者にイベントの趣旨を伝え、ボタンページへ誘導する。  
* **表示内容**:  
  * イベントのタイトルや説明。  
  * ボタンページ (/button) へのQRコード。  
  * 簡単な操作説明（「スマホでQRを読み込んでボタンを押そう！」など）。  
* **ターゲットデバイス**: プロジェクター、大型ディスプレイ。

### **3.2. メーターページ (/meter)**

* **目的**: 全員のボタン押下回数をリアルタイムで可視化し、盛り上がりを演出する。  
* **レイアウト**: 画面を左右2分割で構成する。  
  * **左側**: メーターのビジュアル表示エリア。  
  * **右側**: 現在のカウント数を表示するエリア。  
* **表示内容**:  
  * **メーター（左側）**:  
    * 50個のセグメントで構成される。  
    * カウントが1増えるごとに、1セグメントが色付けされる。  
    * **渦巻き状に外側から中央に向かって**色がついていくビジュアル。  
    * カウントが0に近いほど青く、50に近づくにつれて段階的に赤く変化する。  
  * **カウント数（右側）**:  
    * 現在の合計カウント数を巨大なフォントで表示する。  
  * **リセットボタン**:  
    * 画面下部のどこかに配置する。管理者（主催者）向け。  
  * **ゴール達成時**:  
    * 画面全体にお祝いのメッセージとして\*\*「酷暑！」\*\*というテキストを大きく表示。  
    * react-canvas-confettiとFramer Motionによるリッチなアニメーション効果。  
* **ターゲットデバイス**: プロジェクター、大型ディスプレイ。

### **3.3. ボタンページ (/button)**

* **目的**: 参加者がカウントを増やすためのアクションを行う。  
* **表示内容**:  
  * 画面中央に大きく、押しやすいボタンを一つ表示。  
  * ボタンを押した際の簡単なフィードバック（振動やエフェクトなど）。  
* **状態**:  
  * **通常時**: ボタンはアクティブで、押下可能。  
  * **ゴール達成後**: ボタンは非アクティブ（無効化）されるか、押しても何も起こらない状態になる。  
* **ターゲットデバイス**: スマートフォン。

## **4\. 機能要件**

| ID | 要件 | 詳細 |  
| FN-01 | リアルタイムカウント | ボタンが押されると、Pusherを介して即座にメーターページのカウントが増加すること。 |  
| FN-02 | ゴール判定 | 合計カウントが50を超えた瞬間に「ゴール達成」状態に遷移すること。 |  
| FN-03 | ゴール後の制御 | ゴール達成後は、ボタンページからの操作を受け付けず、カウントが増加しないこと。 |  
| FN-04 | ゴール演出 | ゴール達成時、メーターページで紙吹雪などのリッチなアニメーションが表示されること。 |  
| FN-05 | リセット機能 | メーターページのリセットボタンを押すと、Pusherを介して全クライアントの状態が初期化され、カウントが0に戻ること。 |

## **5\. 技術的な考慮事項**

* **リアルタイム通信**: サーバーとクライアント間のリアルタイムな状態同期には**Pusher (Channels)** を利用する。  
  * **イベント**: increase-count（カウントアップ）、reset-game（リセット）の2種類のイベントを定義する。  
* **状態管理**: クライアントサイドの状態はReactフックで管理する。サーバー側では状態を保持せず、Pusherをメッセージブローカーとしてのみ利用する（ステートレス）。