# **プロジェクトガイドライン**

## **プロジェクト概要**

欽ちゃんの仮装大賞のメーターをモチーフにした、リアルタイム参加型アプリケーション。  
複数のユーザーが手元のスマートフォンでボタンを押し、その合計値が別画面のメーターにリアルタイムで反映される。一定時間操作がないと、最終的な数値が確定し、お祝いのアニメーションが表示される。

## **1\. 使用技術スタック**

### **フロントエンド & 開発環境**

| カテゴリ | 技術 | 役割 |
| :---- | :---- | :---- |
| **フレームワーク** | Next.js 15 (App Router) | アプリケーションの基本骨格、UI構築、サーバー機能 |
| **UIコンポーネント** | shadcn/ui | 高品質でカスタマイズ性の高いUIコンポーネント群 |
| **アニメーション** | Framer Motion | コンポーネントのインタラクティブなアニメーション |
| **エフェクト** | react-canvas-confetti | お祝いの紙吹雪エフェクト |
| **パッケージ管理** | pnpm | 高速で効率的なパッケージマネージャー |
| **コード品質** | Biome | リンター（構文チェック）とフォーマッター（コード整形） |
| **実行環境** | Turbopack | Next.js用の高速な開発サーバーとバンドラー |

### **バックエンド & インフラ**

| カテゴリ | 技術 | 役割 |
| :---- | :---- | :---- |
| **リアルタイム通信** | Pusher (Channels) | 複数ユーザー間の操作をリアルタイムで同期させるAPI |
| **ホスティング** | Vercel | Next.jsアプリケーションのデプロイとホスティング |

## **2\. ディレクトリ構成**

プロジェクトのルートレベルからsrc内部まで含めた全体構成は以下の通りです。

.  
├── docs/                     \# \- プロジェクト資料  
│   └── project-guidelines.md  
├── public/                   \# \- 静的アセット (画像など)  
├── src/                      \# \- アプリケーションのソースコード  
│   ├── app/                  \# ✅ Next.jsのルーティング規約  
│   │   ├── (main)/  
│   │   │   ├── meter/  
│   │   │   │   └── page.tsx  
│   │   │   └── button/  
│   │   │       └── page.tsx  
│   │   ├── api/  
│   │   └── ...  
│   ├── \_components/          \# 🖍️ UIコンポーネント (プライベート)  
│   │   ├── features/  
│   │   ├── shared/  
│   │   └── ui/  
│   ├── \_hooks/               \# 🖍️ カスタムフック/ロジック (プライベート)  
│   │   ├── meter/  
│   │   └── shared/  
│   ├── \_lib/                 \# 🖍️ 外部連携/ユーティリティ (プライベート)  
│   └── \_types/               \# 🖍️ TypeScript型定義 (プライベート)  
├── .env.local                \# \- 環境変数 (秘密鍵など)  
├── .gitignore                \# \- Git追跡除外ファイル  
├── biome.json                \# \- Biome設定ファイル  
├── next.config.mjs           \# \- Next.js設定ファイル  
├── package.json              \# \- プロジェクト定義と依存関係  
├── pnpm-lock.yaml            \# \- pnpmロックファイル  
├── postcss.config.js         \# \- PostCSS設定  
├── README.md                 \# \- プロジェクトのReadMe  
├── tailwind.config.ts        \# \- Tailwind CSS設定  
└── tsconfig.json             \# \- TypeScript設定

* **src/**: アプリケーションの主要なソースコードを格納します。  
* **docs/**: このガイドラインなど、開発に関連するドキュメントを格納します。  
* **public/**: 画像やフォントなど、ビルド処理を必要としない静的ファイルを配置します。  
* **ルートファイル**: package.jsonやnext.config.mjsなど、プロジェクト全体の設定ファイルはルートに配置します。

## **3\. 開発ルール**

### **UIとロジックの分離 (関心の分離)**

* **UI (見た目)**: \_components ディレクトリ内に配置します。コンポーネントは状態を持たず、propsを受け取って描画することに専念する「プレゼンテーショナルコンポーネント」を目指します。  
* **ロジック (振る舞い)**: \_hooks ディレクトリ内にカスタムフックとして切り出します。状態管理、API通信、副作用などのロジックはここに集約します。  
* **ページの役割**: app/\*\*/page.tsx は、必要なフックを呼び出し、その結果をコンポーネントにpropsとして渡す「接着剤」の役割に徹します。

### **コンポーネントの責務**

* **\_components/ui**: shadcn/uiによって自動生成された、プリミティブなコンポーネント。直接編集は行いません。  
* **\_components/shared**: アプリケーション全体で再利用可能な汎用コンポーネント（例: Icon, LoadingSpinner）。特定の機能に依存しません。  
* **\_components/features**: 特定の機能ドメイン（例: meter）に特化したコンポーネント。他の機能からは直接利用しません。

### **フックの分類**

\_hooks ディレクトリ内は、保守性を高めるためにサブディレクトリに分類します。

* **機能ドメイン別 (例: \_hooks/meter/)**: 特定の機能（meterなど）に強く関連するロジックを格納します。\_components/features の分類と対応させます。  
* **共通 (\_hooks/shared/)**: 複数の機能ドメインから横断的に利用される、汎用的なロジック（usePusherなど）を格納します。

### **プライベートフォルダ (\_) の規約**

* Next.jsのルーティング規約に直接関わる app や app/api 以外の、コードを格納するためのディレクトリには、先頭にアンダースコア \_ をつけます。  
* これにより、「このフォルダはURLパスとは無関係なコード置き場である」という意図を明確にします。

### **命名規則**

* **コンポーネント**: PascalCase (例: MeterDisplay.tsx)  
* **カスタムフック**: useから始まるcamelCase (例: useMeterState.ts)